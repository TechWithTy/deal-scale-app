@tailwind base;

img,
video {
	max-width: none;
	height: auto;
}

/* Safe area padding for mobile devices */
.safe-bottom {
	padding-bottom: env(safe-area-inset-bottom, 0);
}

/* Chip type variants for AI components - Adapts to dynamic themes */
.chip-variant-variable {
	--chip-bg: 217 91% 60%;
	--chip-text: 217 91% 20%;
	--chip-border: 217 91% 50%;
}

.chip-variant-tool {
	--chip-bg: 142 76% 55%;
	--chip-text: 142 76% 15%;
	--chip-border: 142 76% 45%;
}

.chip-variant-function {
	--chip-bg: 258 84% 60%;
	--chip-text: 258 84% 20%;
	--chip-border: 258 84% 50%;
}

.chip-variant-parameter {
	--chip-bg: 38 92% 60%;
	--chip-text: 38 92% 20%;
	--chip-border: 38 92% 50%;
}

.chip-variant-script {
	--chip-bg: 350 89% 60%;
	--chip-text: 350 89% 20%;
	--chip-border: 350 89% 50%;
}

/* Agent chip - Orange variant (A2A agents) */
.chip-variant-agent {
	--chip-bg: 25 95% 53%;
	--chip-text: 25 95% 15%;
	--chip-border: 25 95% 45%;
}

/* Dark mode variants */
.dark .chip-variant-variable {
	--chip-bg: 217 91% 40%;
	--chip-text: 217 91% 90%;
	--chip-border: 217 91% 45%;
}

.dark .chip-variant-tool {
	--chip-bg: 142 76% 36%;
	--chip-text: 142 76% 90%;
	--chip-border: 142 76% 40%;
}

.dark .chip-variant-function {
	--chip-bg: 258 84% 45%;
	--chip-text: 258 84% 90%;
	--chip-border: 258 84% 50%;
}

.dark .chip-variant-parameter {
	--chip-bg: 38 92% 50%;
	--chip-text: 38 92% 90%;
	--chip-border: 38 92% 55%;
}

.dark .chip-variant-script {
	--chip-bg: 350 89% 45%;
	--chip-text: 350 89% 90%;
	--chip-border: 350 89% 50%;
}

/* Agent chip - lighter in dark mode */
.dark .chip-variant-agent {
	--chip-bg: 25 95% 43%;
	--chip-text: 25 95% 95%;
	--chip-border: 25 95% 50%;
}

/* Dynamic theme adaptations for chips */
/* When mood themes are active, adjust chip colors to complement */
.variant-mood-calm .chip-variant-variable,
:root.variant-mood-calm .chip-variant-variable {
	--chip-bg: 200 85% 60%;
	--chip-text: 200 85% 20%;
	--chip-border: 200 85% 50%;
}

.variant-mood-energetic .chip-variant-script,
:root.variant-mood-energetic .chip-variant-script {
	--chip-bg: 24 95% 60%;
	--chip-text: 24 95% 20%;
	--chip-border: 24 95% 50%;
}

.variant-mood-focused .chip-variant-function,
:root.variant-mood-focused .chip-variant-function {
	--chip-bg: 258 84% 60%;
	--chip-text: 258 84% 20%;
	--chip-border: 258 84% 50%;
}

/* Pipeline theme adaptations */
.variant-pipeline-healthy .chip-variant-tool,
:root.variant-pipeline-healthy .chip-variant-tool {
	--chip-bg: 142 76% 60%;
	--chip-text: 142 76% 20%;
	--chip-border: 142 76% 50%;
}

.variant-pipeline-watch .chip-variant-parameter,
:root.variant-pipeline-watch .chip-variant-parameter {
	--chip-bg: 38 92% 65%;
	--chip-text: 38 92% 20%;
	--chip-border: 38 92% 55%;
}

.variant-pipeline-risk .chip-variant-script,
:root.variant-pipeline-risk .chip-variant-script {
	--chip-bg: 0 84% 60%;
	--chip-text: 0 84% 20%;
	--chip-border: 0 84% 50%;
}

@layer base {
	/* Variant-only accents: do not touch background/foreground */
	.variant-mood-calm {
		--accent: 200 90% 85%;
		--accent-foreground: 220 40% 20%;
		--primary: 200 85% 40%;
		--primary-foreground: 210 40% 98%;
	}
	.variant-mood-energetic {
		--accent: 36 100% 80%;
		--accent-foreground: 24 70% 18%;
		--primary: 24 95% 50%;
		--primary-foreground: 210 40% 98%;
	}
	.variant-mood-focused {
		--accent: 260 90% 88%;
		--accent-foreground: 255 30% 22%;
		--primary: 258 84% 54%;
		--primary-foreground: 210 40% 98%;
	}

	.variant-weather-sunny {
		--accent: 50 100% 80%;
		--accent-foreground: 35 60% 18%;
		--primary: 46 100% 50%;
		--primary-foreground: 222.2 47.4% 11.2%;
	}
	.variant-weather-rainy {
		--accent: 205 90% 85%;
		--accent-foreground: 220 30% 22%;
		--primary: 205 80% 45%;
		--primary-foreground: 210 40% 98%;
	}
	.variant-weather-stormy {
		--accent: 260 60% 60%;
		--accent-foreground: 230 30% 12%;
		--primary: 260 70% 55%;
		--primary-foreground: 210 40% 98%;
	}

	.variant-pipeline-healthy {
		--accent: 142 76% 80%;
		--accent-foreground: 150 35% 18%;
		--primary: 142 76% 36%;
		--primary-foreground: 355.7 100% 97.3%;
	}
	.variant-pipeline-watch {
		--accent: 48 100% 84%;
		--accent-foreground: 35 60% 18%;
		--primary: 38 92% 50%;
		--primary-foreground: 222.2 47.4% 11.2%;
	}
	.variant-pipeline-risk {
		--accent: 0 85% 80%;
		--accent-foreground: 0 65% 20%;
		--primary: 0 84.2% 42%;
		--primary-foreground: 210 40% 98%;
	}

	.dark.variant-mood-calm {
		--accent: 200 60% 35%;
		--accent-foreground: 210 40% 98%;
		--primary: 200 70% 45%;
		--primary-foreground: 210 40% 98%;
	}
	.dark.variant-mood-energetic {
		--accent: 24 90% 45%;
		--accent-foreground: 210 40% 98%;
		--primary: 24 95% 55%;
		--primary-foreground: 210 40% 98%;
	}
	.dark.variant-mood-focused {
		--accent: 260 70% 45%;
		--accent-foreground: 210 40% 98%;
		--primary: 258 84% 56%;
		--primary-foreground: 210 40% 98%;
	}

	.dark.variant-weather-sunny {
		--accent: 50 90% 45%;
		--accent-foreground: 210 40% 98%;
		--primary: 46 100% 55%;
		--primary-foreground: 222.2 47.4% 11.2%;
	}
	.dark.variant-weather-rainy {
		--accent: 205 70% 40%;
		--accent-foreground: 210 40% 98%;
		--primary: 205 80% 50%;
		--primary-foreground: 210 40% 98%;
	}
	.dark.variant-weather-stormy {
		--accent: 260 55% 55%;
		--accent-foreground: 210 40% 98%;
		--primary: 260 70% 60%;
		--primary-foreground: 210 40% 98%;
	}

	.dark.variant-pipeline-healthy {
		--accent: 142 60% 35%;
		--accent-foreground: 210 40% 98%;
		--primary: 142 76% 40%;
		--primary-foreground: 355.7 100% 97.3%;
	}
	.dark.variant-pipeline-watch {
		--accent: 48 90% 45%;
		--accent-foreground: 210 40% 98%;
		--primary: 38 92% 55%;
		--primary-foreground: 222.2 47.4% 11.2%;
	}
	.dark.variant-pipeline-risk {
		--accent: 0 70% 40%;
		--accent-foreground: 210 40% 98%;
		--primary: 0 84.2% 48%;
		--primary-foreground: 210 40% 98%;
	}
}

@layer base {
	/* Ensure variants apply when class is on <html> by also targeting :root */
	:root.variant-mood-calm {
		--accent: 200 90% 85%;
		--accent-foreground: 220 40% 20%;
		--primary: 200 85% 40%;
		--primary-foreground: 210 40% 98%;
	}
	:root.variant-mood-energetic {
		--accent: 36 100% 80%;
		--accent-foreground: 24 70% 18%;
		--primary: 24 95% 50%;
		--primary-foreground: 210 40% 98%;
	}
	:root.variant-mood-focused {
		--accent: 260 90% 88%;
		--accent-foreground: 255 30% 22%;
		--primary: 258 84% 54%;
		--primary-foreground: 210 40% 98%;
	}

	:root.variant-weather-sunny {
		--accent: 50 100% 80%;
		--accent-foreground: 35 60% 18%;
		--primary: 46 100% 50%;
		--primary-foreground: 222.2 47.4% 11.2%;
	}
	:root.variant-weather-rainy {
		--accent: 205 90% 85%;
		--accent-foreground: 220 30% 22%;
		--primary: 205 80% 45%;
		--primary-foreground: 210 40% 98%;
	}
	:root.variant-weather-stormy {
		--accent: 260 60% 60%;
		--accent-foreground: 230 30% 12%;
		--primary: 260 70% 55%;
		--primary-foreground: 210 40% 98%;
	}

	:root.variant-pipeline-healthy {
		--accent: 142 76% 80%;
		--accent-foreground: 150 35% 18%;
		--primary: 142 76% 36%;
		--primary-foreground: 355.7 100% 97.3%;
	}
	:root.variant-pipeline-watch {
		--accent: 48 100% 84%;
		--accent-foreground: 35 60% 18%;
		--primary: 38 92% 50%;
		--primary-foreground: 222.2 47.4% 11.2%;
	}
	:root.variant-pipeline-risk {
		--accent: 0 85% 80%;
		--accent-foreground: 0 65% 20%;
		--primary: 0 84.2% 42%;
		--primary-foreground: 210 40% 98%;
	}

	.dark:root.variant-mood-calm {
		--accent: 200 60% 35%;
		--accent-foreground: 210 40% 98%;
		--primary: 200 70% 45%;
		--primary-foreground: 210 40% 98%;
	}
	.dark:root.variant-mood-energetic {
		--accent: 24 90% 45%;
		--accent-foreground: 210 40% 98%;
		--primary: 24 95% 55%;
		--primary-foreground: 210 40% 98%;
	}
	.dark:root.variant-mood-focused {
		--accent: 260 70% 45%;
		--accent-foreground: 210 40% 98%;
		--primary: 258 84% 56%;
		--primary-foreground: 210 40% 98%;
	}

	.dark:root.variant-weather-sunny {
		--accent: 50 90% 45%;
		--accent-foreground: 210 40% 98%;
		--primary: 46 100% 55%;
		--primary-foreground: 222.2 47.4% 11.2%;
	}
	.dark:root.variant-weather-rainy {
		--accent: 205 70% 40%;
		--accent-foreground: 210 40% 98%;
		--primary: 205 80% 50%;
		--primary-foreground: 210 40% 98%;
	}
	.dark:root.variant-weather-stormy {
		--accent: 260 55% 55%;
		--accent-foreground: 210 40% 98%;
		--primary: 260 70% 60%;
		--primary-foreground: 210 40% 98%;
	}

	.dark:root.variant-pipeline-healthy {
		--accent: 142 60% 35%;
		--accent-foreground: 210 40% 98%;
		--primary: 142 76% 40%;
		--primary-foreground: 355.7 100% 97.3%;
	}
	.dark:root.variant-pipeline-watch {
		--accent: 48 90% 45%;
		--accent-foreground: 210 40% 98%;
		--primary: 38 92% 55%;
		--primary-foreground: 222.2 47.4% 11.2%;
	}
	.dark:root.variant-pipeline-risk {
		--accent: 0 70% 40%;
		--accent-foreground: 210 40% 98%;
		--primary: 0 84.2% 48%;
		--primary-foreground: 210 40% 98%;
	}
}

@tailwind components;
@tailwind utilities;

@layer base {
	:root {
		--background: 0 0% 100%;
		--foreground: 222.2 84% 4.9%;
		--card: 0 0% 100%;
		--card-foreground: 222.2 84% 4.9%;
		--popover: 0 0% 100%;
		--popover-foreground: 222.2 84% 4.9%;
		--primary: 210 96% 26%;
		--primary-foreground: 210 40% 98%;
		--secondary: 204 82% 28%;
		--secondary-foreground: 210 40% 98%;
		--muted: 210 40% 96.1%;
		--muted-foreground: 215.4 15% 32%;
		--accent: 36 100% 84%;
		--accent-foreground: 222.2 47.4% 11.2%;
		--destructive: 0 84.2% 42%;
		--destructive-foreground: 210 40% 98%;
		--border: 214.3 31.8% 91.4%;
		--input: 214.3 31.8% 91.4%;
		--ring: 222.2 84% 4.9%;
		--radius: 0.5rem;
		--chart-1: 12 76% 61%;
		--chart-2: 173 58% 39%;
		--chart-3: 197 37% 24%;
		--chart-4: 43 74% 66%;
		--chart-5: 27 87% 67%;
		--hero-background: 222 47% 15%;
		--hero-foreground: 210 40% 98%;
		--hero-accent: 197 88% 48%;
		--hero-accent-foreground: 222 40% 12%;
	}

	.dark {
		--background: 222.2 84% 4.9%;
		--foreground: 210 40% 98%;
		--card: 222.2 84% 9.8%;
		--card-foreground: 210 40% 98%;
		--popover: 222.2 84% 9.8%;
		--popover-foreground: 210 40% 98%;
		--primary: 204 88% 45%;
		--primary-foreground: 222.2 47.4% 11.2%;
		--secondary: 195 66% 72%;
		--secondary-foreground: 222.2 47.4% 11.2%;
		--muted: 217.2 32.6% 17.5%;
		--muted-foreground: 215 20.2% 75%;
		--accent: 36 100% 44%;
		--accent-foreground: 210 40% 98%;
		--destructive: 0 62.8% 30.6%;
		--destructive-foreground: 210 40% 98%;
		--border: 217.2 32.6% 17.5%;
		--input: 217.2 32.6% 17.5%;
		--ring: 212.7 26.8% 83.9%;
		--chart-1: 12 76% 61%;
		--chart-2: 173 58% 39%;
		--chart-3: 197 37% 24%;
		--chart-4: 43 74% 66%;
		--chart-5: 27 87% 67%;
		--hero-background: 222 47% 15%;
		--hero-foreground: 210 40% 98%;
		--hero-accent: 197 88% 48%;
		--hero-accent-foreground: 222 40% 12%;
	}

	/* Named Themes: Mood */
	.theme-mood-calm {
		--background: 210 60% 98%;
		--foreground: 222.2 84% 4.9%;
		--accent: 200 90% 85%;
		--accent-foreground: 220 40% 20%;
		--primary: 200 85% 40%;
		--primary-foreground: 210 40% 98%;
	}

	.dark.theme-mood-calm {
		--background: 220 30% 12%;
		--foreground: 210 40% 98%;
		--accent: 200 60% 35%;
		--accent-foreground: 210 40% 98%;
		--primary: 200 70% 45%;
		--primary-foreground: 210 40% 98%;
	}

	.theme-mood-energetic {
		--background: 36 100% 97%;
		--foreground: 24 60% 15%;
		--accent: 36 100% 80%;
		--accent-foreground: 24 70% 18%;
		--primary: 24 95% 50%;
		--primary-foreground: 210 40% 98%;
	}

	.dark.theme-mood-energetic {
		--background: 24 25% 12%;
		--foreground: 210 40% 98%;
		--accent: 24 90% 45%;
		--accent-foreground: 210 40% 98%;
		--primary: 24 95% 55%;
		--primary-foreground: 210 40% 98%;
	}

	.theme-mood-focused {
		--background: 250 60% 98%;
		--foreground: 250 30% 18%;
		--accent: 260 90% 88%;
		--accent-foreground: 255 30% 22%;
		--primary: 258 84% 54%;
		--primary-foreground: 210 40% 98%;
	}

	.dark.theme-mood-focused {
		--background: 255 35% 12%;
		--foreground: 210 40% 98%;
		--accent: 260 70% 45%;
		--accent-foreground: 210 40% 98%;
		--primary: 258 84% 56%;
		--primary-foreground: 210 40% 98%;
	}

	/* Named Themes: Weather */
	.theme-weather-sunny {
		--background: 50 100% 97%;
		--foreground: 35 60% 15%;
		--accent: 50 100% 80%;
		--accent-foreground: 35 60% 18%;
		--primary: 46 100% 50%;
		--primary-foreground: 222.2 47.4% 11.2%;
	}

	.dark.theme-weather-sunny {
		--background: 48 20% 12%;
		--foreground: 210 40% 98%;
		--accent: 50 90% 45%;
		--accent-foreground: 210 40% 98%;
		--primary: 46 100% 55%;
		--primary-foreground: 222.2 47.4% 11.2%;
	}

	.theme-weather-rainy {
		--background: 210 40% 96%;
		--foreground: 220 30% 16%;
		--accent: 205 90% 85%;
		--accent-foreground: 220 30% 22%;
		--primary: 205 80% 45%;
		--primary-foreground: 210 40% 98%;
	}

	.dark.theme-weather-rainy {
		--background: 215 25% 12%;
		--foreground: 210 40% 98%;
		--accent: 205 70% 40%;
		--accent-foreground: 210 40% 98%;
		--primary: 205 80% 50%;
		--primary-foreground: 210 40% 98%;
	}

	.theme-weather-stormy {
		--background: 230 15% 14%;
		--foreground: 210 40% 98%;
		--card: 230 15% 16%;
		--accent: 260 60% 60%;
		--accent-foreground: 230 30% 12%;
		--primary: 260 70% 55%;
		--primary-foreground: 210 40% 98%;
	}

	.dark.theme-weather-stormy {
		--background: 230 15% 10%;
		--foreground: 210 40% 98%;
		--card: 230 15% 12%;
		--accent: 260 55% 55%;
		--accent-foreground: 210 40% 98%;
		--primary: 260 70% 60%;
		--primary-foreground: 210 40% 98%;
	}

	/* Named Themes: Sales Pipeline Health */
	.theme-pipeline-healthy {
		--background: 140 60% 97%;
		--foreground: 150 30% 14%;
		--accent: 142 76% 80%;
		--accent-foreground: 150 35% 18%;
		--primary: 142 76% 36%;
		--primary-foreground: 355.7 100% 97.3%;
	}

	.dark.theme-pipeline-healthy {
		--background: 150 20% 12%;
		--foreground: 210 40% 98%;
		--accent: 142 60% 35%;
		--accent-foreground: 210 40% 98%;
		--primary: 142 76% 40%;
		--primary-foreground: 355.7 100% 97.3%;
	}

	.theme-pipeline-watch {
		--background: 48 100% 97%;
		--foreground: 35 60% 14%;
		--accent: 48 100% 84%;
		--accent-foreground: 35 60% 18%;
		--primary: 38 92% 50%;
		--primary-foreground: 222.2 47.4% 11.2%;
	}

	.dark.theme-pipeline-watch {
		--background: 38 20% 12%;
		--foreground: 210 40% 98%;
		--accent: 48 90% 45%;
		--accent-foreground: 210 40% 98%;
		--primary: 38 92% 55%;
		--primary-foreground: 222.2 47.4% 11.2%;
	}

	.theme-pipeline-risk {
		--background: 0 100% 97%;
		--foreground: 0 60% 20%;
		--accent: 0 85% 80%;
		--accent-foreground: 0 65% 20%;
		--primary: 0 84.2% 42%;
		--primary-foreground: 210 40% 98%;
	}

	.dark.theme-pipeline-risk {
		--background: 0 20% 12%;
		--foreground: 210 40% 98%;
		--accent: 0 70% 40%;
		--accent-foreground: 210 40% 98%;
		--primary: 0 84.2% 48%;
		--primary-foreground: 210 40% 98%;
	}

	/* Fallback for when custom theme replaces `.dark` class:
	   Apply dark variants using media query so they work under System/Dark
	   even if `.dark` is not present. */
	@media (prefers-color-scheme: dark) {
		.theme-mood-calm {
			--background: 220 30% 12%;
			--foreground: 210 40% 98%;
			--accent: 200 60% 35%;
			--accent-foreground: 210 40% 98%;
			--primary: 200 70% 45%;
			--primary-foreground: 210 40% 98%;
		}
		.theme-mood-energetic {
			--background: 24 25% 12%;
			--foreground: 210 40% 98%;
			--accent: 24 90% 45%;
			--accent-foreground: 210 40% 98%;
			--primary: 24 95% 55%;
			--primary-foreground: 210 40% 98%;
		}
		.theme-mood-focused {
			--background: 255 35% 12%;
			--foreground: 210 40% 98%;
			--accent: 260 70% 45%;
			--accent-foreground: 210 40% 98%;
			--primary: 258 84% 56%;
			--primary-foreground: 210 40% 98%;
		}
		.theme-weather-sunny {
			--background: 48 20% 12%;
			--foreground: 210 40% 98%;
			--accent: 50 90% 45%;
			--accent-foreground: 210 40% 98%;
			--primary: 46 100% 55%;
			--primary-foreground: 222.2 47.4% 11.2%;
		}
		.theme-weather-rainy {
			--background: 215 25% 12%;
			--foreground: 210 40% 98%;
			--accent: 205 70% 40%;
			--accent-foreground: 210 40% 98%;
			--primary: 205 80% 50%;
			--primary-foreground: 210 40% 98%;
		}
		.theme-weather-stormy {
			--background: 230 15% 10%;
			--foreground: 210 40% 98%;
			--card: 230 15% 12%;
			--accent: 260 55% 55%;
			--accent-foreground: 210 40% 98%;
			--primary: 260 70% 60%;
			--primary-foreground: 210 40% 98%;
		}
		.theme-pipeline-healthy {
			--background: 150 20% 12%;
			--foreground: 210 40% 98%;
			--accent: 142 60% 35%;
			--accent-foreground: 210 40% 98%;
			--primary: 142 76% 40%;
			--primary-foreground: 355.7 100% 97.3%;
		}
		.theme-pipeline-watch {
			--background: 38 20% 12%;
			--foreground: 210 40% 98%;
			--accent: 48 90% 45%;
			--accent-foreground: 210 40% 98%;
			--primary: 38 92% 55%;
			--primary-foreground: 222.2 47.4% 11.2%;
		}
		.theme-pipeline-risk {
			--background: 0 20% 12%;
			--foreground: 210 40% 98%;
			--accent: 0 70% 40%;
			--accent-foreground: 210 40% 98%;
			--primary: 0 84.2% 48%;
			--primary-foreground: 210 40% 98%;
		}
	}
}

@layer base {
	* {
		@apply border-border;
	}
	body {
		@apply box-border bg-background text-foreground;
	}
}

@layer utilities {
	.min-h-screen {
		min-height: 100vh; /* Fallback */
		min-height: 100dvh;
	}
	.h-screen {
		height: 100vh; /* Fallback */
		height: 100dvh;
	}

	@keyframes quickstart-meteor {
		0% {
			opacity: 0;
			transform: rotate(var(--meteor-angle, 225deg)) translateX(0);
		}
		10% {
			opacity: 0.85;
		}
		70% {
			opacity: 0.75;
		}
		100% {
			opacity: 0;
			transform: rotate(var(--meteor-angle, 225deg))
				translateX(var(--meteor-distance, -640px));
		}
	}

	.animate-meteor {
		animation-name: quickstart-meteor;
		animation-timing-function: linear;
		animation-iteration-count: infinite;
		will-change: transform, opacity;
	}
}

/* Custom animations for voice input */
@keyframes pulse-subtle {
	0%,
	100% {
		opacity: 1;
		transform: scale(1);
	}
	50% {
		opacity: 0.85;
		transform: scale(1.02);
	}
}

.animate-pulse-subtle {
	animation: pulse-subtle 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Accessibility: Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}

	/* Disable specific animations */
	.animate-spin,
	.animate-pulse,
	.animate-pulse-subtle,
	.animate-bounce,
	.animate-ping {
		animation: none !important;
	}
}
